<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.chart.PieChart?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<VBox xmlns="http://javafx.com/javafx"
      xmlns:fx="http://javafx.com/fxml"
      fx:controller="com.customer.controller.DashboardController"
      spacing="20" styleClass="content-area">

    <!-- Page Header -->
    <HBox styleClass="page-header" alignment="CENTER_LEFT">
        <Label text="ðŸ“Š Dashboard" styleClass="page-title"/>
        <Region HBox.hgrow="ALWAYS"/>
        <Button fx:id="refreshBtn" text="ðŸ”„ LÃ m má»›i" onAction="#handleRefresh"
                styleClass="secondary-button"/>
    </HBox>

    <!-- Main Content -->
    <VBox styleClass="page-content" spacing="25" VBox.vgrow="ALWAYS">

        <!-- Statistics Cards Row -->
        <HBox fx:id="statsContainer" spacing="20" alignment="CENTER_LEFT">
            <!-- Total Customers Card -->
            <VBox fx:id="cardTotal" styleClass="stat-card, total" spacing="8" HBox.hgrow="ALWAYS">
                <HBox alignment="CENTER_LEFT" spacing="15">
                    <VBox spacing="5" HBox.hgrow="ALWAYS">
                        <Label text="Tá»•ng KhÃ¡ch HÃ ng" styleClass="stat-card-title"/>
                        <Label fx:id="lblTotalCount" text="0" styleClass="stat-card-value"/>
                    </VBox>
                    <Label text="ðŸ‘¥" styleClass="stat-card-icon"/>
                </HBox>
            </VBox>

            <!-- VIP Customers Card -->
            <VBox fx:id="cardVip" styleClass="stat-card, vip" spacing="8" HBox.hgrow="ALWAYS">
                <HBox alignment="CENTER_LEFT" spacing="15">
                    <VBox spacing="5" HBox.hgrow="ALWAYS">
                        <Label text="KhÃ¡ch VIP" styleClass="stat-card-title"/>
                        <Label fx:id="lblVipCount" text="0" styleClass="stat-card-value"/>
                    </VBox>
                    <Label text="â­" styleClass="stat-card-icon"/>
                </HBox>
            </VBox>

            <!-- New Customers Card -->
            <VBox fx:id="cardNew" styleClass="stat-card, new" spacing="8" HBox.hgrow="ALWAYS">
                <HBox alignment="CENTER_LEFT" spacing="15">
                    <VBox spacing="5" HBox.hgrow="ALWAYS">
                        <Label text="Má»›i ThÃ¡ng NÃ y" styleClass="stat-card-title"/>
                        <Label fx:id="lblNewCount" text="0" styleClass="stat-card-value"/>
                    </VBox>
                    <Label text="ðŸ†•" styleClass="stat-card-icon"/>
                </HBox>
            </VBox>
        </HBox>

        <!-- Charts Section -->
        <HBox spacing="20" VBox.vgrow="ALWAYS">
            <!-- Pie Chart -->
            <VBox styleClass="chart" spacing="15" HBox.hgrow="ALWAYS">
                <Label text="PhÃ¢n Loáº¡i KhÃ¡ch HÃ ng" styleClass="chart-title"/>
                <PieChart fx:id="typeDistributionChart" legendSide="BOTTOM"
                          VBox.vgrow="ALWAYS" animated="true"/>
            </VBox>

            <!-- Recent Customers or Additional Stats -->
            <VBox styleClass="chart" spacing="15" HBox.hgrow="ALWAYS">
                <Label text="Thá»‘ng KÃª Chi Tiáº¿t" styleClass="chart-title"/>
                <VBox spacing="12" VBox.vgrow="ALWAYS">
                    <HBox alignment="CENTER_LEFT" spacing="10">
                        <Label text="ðŸŸ£ VIP:" style="-fx-font-weight: bold;"/>
                        <Label fx:id="lblVipPercent" text="0%"/>
                        <Region HBox.hgrow="ALWAYS"/>
                        <Label fx:id="lblVipDetail" text="0 khÃ¡ch"/>
                    </HBox>
                    <Separator/>
                    <HBox alignment="CENTER_LEFT" spacing="10">
                        <Label text="ðŸ”µ ThÆ°á»ng:" style="-fx-font-weight: bold;"/>
                        <Label fx:id="lblRegularPercent" text="0%"/>
                        <Region HBox.hgrow="ALWAYS"/>
                        <Label fx:id="lblRegularDetail" text="0 khÃ¡ch"/>
                    </HBox>
                    <Separator/>
                    <HBox alignment="CENTER_LEFT" spacing="10">
                        <Label text="ðŸŸ¢ Tiá»m nÄƒng:" style="-fx-font-weight: bold;"/>
                        <Label fx:id="lblPotentialPercent" text="0%"/>
                        <Region HBox.hgrow="ALWAYS"/>
                        <Label fx:id="lblPotentialDetail" text="0 khÃ¡ch"/>
                    </HBox>
                </VBox>
            </VBox>
        </HBox>

    </VBox>

    <!-- Loading Overlay -->
    <StackPane fx:id="loadingOverlay" styleClass="loading-overlay" visible="false" managed="false">
        <ProgressIndicator styleClass="loading-spinner" maxWidth="50" maxHeight="50"/>
    </StackPane>

</VBox>
